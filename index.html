<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="assets/style.css?t=a44c9e9d">
    <link rel="stylesheet" href="http://ricostacruz.com/docpress-rsc/style.css">
    <script src="assets/script.js?t=2bcc4b59"></script>
    <title>scour.js</title>
    <meta name="viewport" content="width=device-width">
    <script>
      if (false || window.location.hostname.indexOf("ricostacruz.com") === window.location.hostname.length - 15) {
        (function(d,o,c,p,r,e,s){d['GoogleAnalyticsObject']=r;d[r]=d[r]||function(){(d[r].q=d[r].q||[]).push(arguments)},d[r].l=1*new Date();e=o.createElement(c),s=o.getElementsByTagName(c)[0];e.async=1;e.src=p;s.parentNode.insertBefore(e,s)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create',"UA-20473929-1",'auto')
      }
    </script>
  </head>
  <body class="-menu-visible">
    <div class="doc-layout">
      <div class="toggle menu-toggle js-menu-toggle"></div>
      <div class="body page-index">
        <div class="header-nav">
          <div class="right"><a href="https://github.com/rstacruz/scour" data-title="rstacruz/scour" class="iconlink">
              <!-- span.title Open in GitHub--><span class="icon -github"></span></a>
          </div>
        </div>
        <div class="markdown-body"><h1 class="massive-header -with-tagline" id="scour.js">scour.js</h1>
<blockquote>
<p>Traverse objects and arrays immutably</p>
</blockquote>
<p>Scour is a general-purpose library for dealing with JSON trees.<br>
As a simple utility with a broad purpose, it can be used to solve many problems. Use it to:</p>
<ul>
<li>Manage your <a href="http://rackt.github.io/redux">Redux</a> datastore.</li>
<li>Provide a model layer to access data in your single-page app. <a href="#models">&#x2192;</a></li>
<li>Navigate a large JSON tree easily.</li>
<li>Rejoice in having a lightweight alternative to <a href="http://facebook.github.io/immutable-js/">Immutable.js</a>. (<a href="comparison.html">Compare</a>)</li>
</ul>
<p><a href="https://travis-ci.org/rstacruz/scour" title="See test builds"><img src="https://travis-ci.org/rstacruz/scour.svg?branch=master" alt="Status"></a></p>
<h2 id="install">Install</h2>
<pre><code class="lang-sh">npm install --save-exact scourjs
</code></pre>
<pre><code class="lang-js"><span class="pl-c1">window</span>.scour                       <span class="pl-c">// non commonjs</span>
<span class="pl-k">const</span> scour = <span class="pl-c1">require</span>(<span class="pl-s">&apos;scourjs&apos;</span>)   <span class="pl-c">// commonjs/node</span>
<span class="pl-k">import</span> scour <span class="pl-k">from</span> <span class="pl-s">&apos;scourjs&apos;</span>        // es6 modules
</code></pre>
<h2 id="features">Features</h2>
<p>Calling <code>scour(object)</code> returns a wrapper that you can use to traverse <code>object</code>.
Use <a href="#get">get()</a> to retrieve values.</p>
<pre><code class="lang-js">data =
  { users:
    { <span class="hljs-number">1</span>: { name: <span class="pl-s">&apos;john&apos;</span> },
      <span class="hljs-number">2</span>: { name: <span class="pl-s">&apos;shane&apos;</span>, confirmed: <span class="pl-c1">true</span> },
      <span class="hljs-number">3</span>: { name: <span class="pl-s">&apos;barry&apos;</span>, confirmed: <span class="pl-c1">true</span> } } }
</code></pre>
<pre><code class="lang-js">scour(data).get(<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;1&apos;</span>, <span class="pl-s">&apos;name&apos;</span>)   <span class="pl-c">// =&gt; &apos;john&apos;</span>
</code></pre>
<br>
<h3 id="traversal">Traversal</h3>
<p>Use <a href="#go">go()</a> to dig into the structure. It will return another <code>scour</code>
wrapper scoped to that object.</p>
<pre><code class="lang-js">data =
  { users:
    { admins:
      { bob: { logged_in: <span class="pl-c1">true</span> },
        sue: { logged_in: <span class="pl-c1">false</span> } } } }
</code></pre>
<pre><code class="lang-js">users  = scour(data).go(<span class="pl-s">&apos;users&apos;</span>)            <span class="pl-c">// =&gt; [scour (admins)]</span>
admins = scour(data).go(<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;admins&apos;</span>)  <span class="pl-c">// =&gt; [scour (bob, sue)]</span>

admins.go(<span class="pl-s">&apos;bob&apos;</span>).get(<span class="pl-s">&apos;logged_in&apos;</span>)           <span class="pl-c">// =&gt; true</span>
</code></pre>
<br>
<h3 id="chaining">Chaining</h3>
<p><code>scour()</code> provides a wrapper that can be used to chain methods. This is inspired by <a href="http://underscorejs.org/">Underscore</a> and <a href="http://lodash.com/">Lodash</a>.</p>
<pre><code class="lang-js">scour(data)
  .go(<span class="pl-s">&apos;users&apos;</span>)
  .filter({ admin: <span class="pl-c1">true</span> })
  .value
</code></pre>
<br>
<h3 id="immutable-modifications">Immutable modifications</h3>
<p>Use <a href="#set">set()</a> to update values. Scout treats all data as immutable, so this
doesn&#x2019;t modify your original <code>data</code>, but gets you a new one with the
modifications made.</p>
<pre><code class="lang-js">data = scour(data)
  .set([<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;1&apos;</span>, <span class="pl-s">&apos;updated_at&apos;</span>], +<span class="pl-k">new</span> <span class="pl-c1">Date</span>())
  .value

<span class="pl-c">// =&gt; { users:</span>
<span class="pl-c">//      { 1: { name: &apos;john&apos;, updated_at: 1450667171188 },</span>
<span class="pl-c">//        2: { name: &apos;shane&apos;, confirmed: true },</span>
<span class="pl-c">//        3: { name: &apos;barry&apos;, confirmed: true } } }</span>
</code></pre>
<br>
<h3 id="advanced-traversing">Advanced traversing</h3>
<p>Use <a href="#filter">filter()</a> to filter results with advanced querying.</p>
<pre><code class="lang-js">users = scour(data).go(<span class="pl-s">&apos;users&apos;</span>)

users
  .filter({ confirmed: <span class="pl-c1">true</span> })
  .at(<span class="hljs-number">0</span>)
  .get(<span class="pl-s">&apos;name&apos;</span>)   <span class="pl-c">// =&gt; &apos;shane&apos;</span>
</code></pre>
<br>
<h3 id="models">Models</h3>
<p>Use <a href="#use">use()</a> to add your own methods to certain keypaths. This makes them behave like models. See <a href="extensions_example.html">a detailed example</a> of this.</p>
<h5 class="file-heading" id="sample-data">Sample data</h5>
<pre><code class="lang-js">data =
  { artists:
    { <span class="hljs-number">1</span>: { first_name: <span class="pl-s">&apos;Louie&apos;</span>, last_name: <span class="pl-s">&apos;Armstrong&apos;</span> },
      <span class="hljs-number">2</span>: { first_name: <span class="pl-s">&apos;Miles&apos;</span>, last_name: <span class="pl-s">&apos;Davis&apos;</span> } } }
</code></pre>
<h5 class="file-heading" id="your-models">Your models</h5>
<pre><code class="lang-js">Root = {
  artists () { <span class="pl-k">return</span> <span class="pl-k">this</span>.go(<span class="pl-s">&apos;artists&apos;</span>) }
}

Artist = {
  fullname () {
    <span class="pl-k">return</span> <span class="pl-k">this</span>.get(<span class="pl-s">&apos;first_name&apos;</span>) + <span class="pl-s">&apos; &apos;</span> + <span class="pl-k">this</span>.get(<span class="pl-s">&apos;last_name&apos;</span>)
  }
}
</code></pre>
<h5 class="file-heading" id="using-with-scour">Using with scour</h5>
<pre><code class="lang-js">db = scour(data)
  .use({
    <span class="pl-s">&apos;&apos;</span>: Root,
    <span class="pl-s">&apos;artists.*&apos;</span>: Artist
  })

db.artists().find({ name: <span class="pl-s">&apos;Miles&apos;</span> }).fullname()
<span class="pl-c">//=&gt; &apos;Miles Davis&apos;</span>
</code></pre>
<br>
<h2 id="api">API</h2>
<!--api-->
<h3 id="scour">scour</h3>
<blockquote>
<p><code>scour(object)</code></p>
</blockquote>
<p>Returns a scour instance wrapping <code>object</code>.</p>
<pre><code class="lang-js">scour(obj)
</code></pre>
<p>It can be called on any Object or Array. (In fact, it can be called on
anything, but is only generally useful for Objects and Arrays.)</p>
<pre><code class="lang-js">data = { menu: { visible: <span class="pl-c1">true</span>, position: <span class="pl-s">&apos;left&apos;</span> } }
scour(data).get(<span class="pl-s">&apos;menu.visible&apos;</span>)

list = [ { id: <span class="hljs-number">2</span> }, { id: <span class="hljs-number">5</span> }, { id: <span class="hljs-number">12</span> } ]
scour(list).get(<span class="pl-s">&apos;0.id&apos;</span>)
</code></pre>
<p><strong>Chaining</strong>:
You can use it to start method chains. In fact, the intended use is to keep
your root <a href="#scour">scour</a> object around, and chain from this.</p>
<pre><code class="lang-js">db = scour({ menu: { visible: <span class="pl-c1">true</span>, position: <span class="pl-s">&apos;left&apos;</span> } })

<span class="pl-c">// Elsewhere:</span>
menu = db.go(<span class="pl-s">&apos;menu&apos;</span>)
menu.get(<span class="pl-s">&apos;visible&apos;</span>)
</code></pre>
<p><strong>Properties</strong>:
It the <a href="#root">root</a>, <a href="#value">value</a> and <a href="#keypath">keypath</a> properties.</p>
<pre><code class="lang-js">s = scour(obj)
s.root             <span class="pl-c">// =&gt; [scour object]</span>
s.value            <span class="pl-c">// =&gt; raw data (that is, `obj`)</span>
s.keypath          <span class="pl-c">// =&gt; string array</span>
</code></pre>
<p><strong>Accessing the value:</strong>
You can access the raw data using <a href="#value">value</a>.</p>
<pre><code class="lang-js">db = scour(data)
db.value               <span class="pl-c">// =&gt; same as `data`</span>
db.go(<span class="pl-s">&apos;users&apos;</span>).value   <span class="pl-c">// =&gt; same as `data.users`</span>
</code></pre>
<h2 id="attributes">Attributes</h2>
<p>These attributes are available to <a href="#scour">scour</a> instances.</p>
<h3 id="value">value</h3>
<blockquote>
<p><code>value</code></p>
</blockquote>
<p>The raw value being wrapped. You can use this to terminate a chained call.</p>
<pre><code class="lang-js">users =
  [ { name: <span class="pl-s">&apos;john&apos;</span>, admin: <span class="pl-c1">true</span> },
    { name: <span class="pl-s">&apos;kyle&apos;</span>, admin: <span class="pl-c1">false</span> } ]

scour(users)
  .filter({ admin: <span class="pl-c1">true</span> })
  .value
<span class="pl-c">// =&gt; [ { name: &apos;john&apos;, admin: true } ]</span>

</code></pre>
<h3 id="root">root</h3>
<blockquote>
<p><code>root</code></p>
</blockquote>
<p>A reference to the root <a href="#scour">scour</a> instance.
Everytime you traverse using <a href="#go">go()</a>, a new <a href="#scour">scour</a> object is spawned that&#x2019;s
scoped to a keypath.  Each of these <a href="#scour">scour</a> objects have a <code>root</code> attribute
that&#x2019;s a reference to the top-level <a href="#scour">scour</a> object.</p>
<pre><code class="lang-js">db = scour(...)

photos = db.go(<span class="pl-s">&apos;photos&apos;</span>)
photos.root    <span class="pl-c">// =&gt; same as `db`</span>
</code></pre>
<p>This allows you to return to the root when needed.</p>
<pre><code class="lang-js">db = scour(...)
artist = db.go(<span class="pl-s">&apos;artists&apos;</span>, <span class="pl-s">&apos;9328&apos;</span>)
artist.root.go(<span class="pl-s">&apos;albums&apos;</span>).find({ artist_id: artist.get(<span class="pl-s">&apos;id&apos;</span>) })
</code></pre>
<h3 id="keypath">keypath</h3>
<blockquote>
<p><code>keypath</code></p>
</blockquote>
<p>An array of strings representing each step in how deep the current scope is
relative to the root. Each time you traverse using <a href="#go">go()</a>, a new <a href="#scour">scour</a>
object is spawned.</p>
<pre><code class="lang-js">db = scour(...)

users = db.go(<span class="pl-s">&apos;users&apos;</span>)
users.keypath            <span class="pl-c">// =&gt; [&apos;users&apos;]</span>

admins = users.go(<span class="pl-s">&apos;admins&apos;</span>)
admins.keypath           <span class="pl-c">// =&gt; [&apos;users&apos;, &apos;admins&apos;]</span>

user = admins.go(<span class="pl-s">&apos;23&apos;</span>)
user.keypath             <span class="pl-c">// =&gt; [&apos;users&apos;, &apos;admins&apos;, &apos;23&apos;]</span>

</code></pre>
<h2 id="traversal-methods">Traversal methods</h2>
<p>For traversing. All these methods return <a href="#scour">scour</a> instances,
making them suitable for chaining.</p>
<h3 id="go">go</h3>
<blockquote>
<p><code>go(keypath...)</code></p>
</blockquote>
<p>Navigates down to a given <code>keypath</code>. Always returns a <a href="#scour">scour</a> instance.</p>
<pre><code class="lang-js">data =
  { users:
    { <span class="hljs-number">12</span>: { name: <span class="pl-s">&apos;steve&apos;</span>, last: <span class="pl-s">&apos;jobs&apos;</span> },
      <span class="hljs-number">23</span>: { name: <span class="pl-s">&apos;bill&apos;</span>, last: <span class="pl-s">&apos;gates&apos;</span> } } }

scour(data).go(<span class="pl-s">&apos;users&apos;</span>)                    <span class="pl-c">// =&gt; [scour (users)]</span>
scour(data).go(<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;12&apos;</span>)              <span class="pl-c">// =&gt; [scour (name, last)]</span>
scour(data).go(<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;12&apos;</span>).get(<span class="pl-s">&apos;name&apos;</span>)  <span class="pl-c">// =&gt; &apos;steve&apos;</span>
</code></pre>
<p><strong>Dot notation:</strong>
Keypaths can be given in dot notation or as an array. These statements are
equivalent.</p>
<pre><code class="lang-js">scour(data).go(<span class="pl-s">&apos;users.12&apos;</span>)
scour(data).go(<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;12&apos;</span>)
scour(data).go([<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;12&apos;</span>])
</code></pre>
<p><strong>Non-objects:</strong>
If you use it on a non-object or non-array value, it will still be
returned as a <a href="#scour">scour</a> instance. This is not likely what you want; use
<a href="#get">get()</a> instead.</p>
<pre><code class="lang-js">attr = scour(data).go(<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;12&apos;</span>, <span class="pl-s">&apos;name&apos;</span>)
attr           <span class="pl-c">// =&gt; [scour object]</span>
attr.value     <span class="pl-c">// =&gt; &apos;steve&apos;</span>
attr.keypath   <span class="pl-c">// =&gt; [&apos;users&apos;, &apos;12&apos;, &apos;name&apos;]</span>
</code></pre>
<h3 id="at">at</h3>
<blockquote>
<p><code>at(index)</code></p>
</blockquote>
<p>Returns the item at <code>index</code>. This differs from <code>go</code> as this searches by
index, not by key.</p>
<pre><code class="lang-js">users =
  { <span class="hljs-number">12</span>: { name: <span class="pl-s">&apos;steve&apos;</span> },
    <span class="hljs-number">23</span>: { name: <span class="pl-s">&apos;bill&apos;</span> } }

scour(users).at(<span class="hljs-number">0</span>)          <span class="pl-c">// =&gt; [scour { name: &apos;steve&apos; }]</span>
scour(users).get(<span class="hljs-number">12</span>)        <span class="pl-c">// =&gt; [scour { name: &apos;steve&apos; }]</span>

</code></pre>
<h3 id="filter">filter</h3>
<blockquote>
<p><code>filter(conditions)</code></p>
</blockquote>
<p>Sifts through the values and returns a set that matches given
<code>conditions</code>. Supports functions, simple objects, and MongoDB-style
queries.</p>
<pre><code class="lang-js">scour(data).filter({ name: <span class="pl-s">&apos;john&apos;</span> })
scour(data).filter({ name: { $<span class="pl-k">in</span>: [<span class="pl-s">&apos;moe&apos;</span>, <span class="pl-s">&apos;larry&apos;</span>] })
</code></pre>
<p>MongoDB-style queries are supported as provided by <a href="https://www.npmjs.com/package/sift">sift.js</a>.  For
reference, see <a href="https://docs.mongodb.org/manual/reference/operator/query/">MongoDB Query Operators</a>.</p>
<pre><code class="lang-js">scour(products).filter({ price: { $gt: <span class="hljs-number">200</span> })
scour(articles).filter({ published_at: { $not: <span class="pl-c1">null</span> }})
</code></pre>
<h3 id="find">find</h3>
<blockquote>
<p><code>find(conditions)</code></p>
</blockquote>
<p>Returns the first value that matches <code>conditions</code>.  Supports MongoDB-style
queries. For reference, see <a href="https://docs.mongodb.org/manual/reference/operator/query/">MongoDB Query Operators</a>. Also
see <a href="#filter">filter()</a>, as this is functionally-equivalent to the first result of
<code>filter()</code>.</p>
<pre><code class="lang-js">scour(data).find({ name: <span class="pl-s">&apos;john&apos;</span> })
scour(data).find({ name: { $<span class="pl-k">in</span>: [<span class="pl-s">&apos;moe&apos;</span>, <span class="pl-s">&apos;larry&apos;</span>] })
</code></pre>
<h3 id="first">first</h3>
<blockquote>
<p><code>first()</code></p>
</blockquote>
<p>Returns the first result as a <a href="#scour">scour</a>-wrapped object. This is equivalent
to <a href="#at">at(0)</a>.</p>
<h3 id="last">last</h3>
<blockquote>
<p><code>last()</code></p>
</blockquote>
<p>Returns the first result as a <a href="#scour">scour</a>-wrapped object. This is equivalent
to <code>at(len() - 1)</code>: see <a href="#at">at()</a> and <a href="#len">len()</a>.</p>
<h2 id="reading-methods">Reading methods</h2>
<p>For retrieving data.</p>
<h3 id="get">get</h3>
<blockquote>
<p><code>get(keypath...)</code></p>
</blockquote>
<p>Returns data in a given <code>keypath</code>.</p>
<pre><code class="lang-js">data =
  { users:
    { <span class="hljs-number">12</span>: { name: <span class="pl-s">&apos;steve&apos;</span> },
      <span class="hljs-number">23</span>: { name: <span class="pl-s">&apos;bill&apos;</span> } } }

scour(data).get(<span class="pl-s">&apos;users&apos;</span>)       <span class="pl-c">// =&gt; same as data.users</span>
scour(data).go(<span class="pl-s">&apos;users&apos;</span>).value  <span class="pl-c">// =&gt; same as data.users</span>
</code></pre>
<p><strong>Dot notation:</strong>
Like <a href="#go">go()</a>, the <code>keypath</code> can be given in dot notation.</p>
<pre><code class="lang-js">scour(data).get(<span class="pl-s">&apos;books.featured.name&apos;</span>)
scour(data).get(<span class="pl-s">&apos;books&apos;</span>, <span class="pl-s">&apos;featured&apos;</span>, <span class="pl-s">&apos;name&apos;</span>)
</code></pre>
<h3 id="len">len</h3>
<blockquote>
<p><code>len()</code></p>
</blockquote>
<p>Returns the length of the object or array. For objects, it returns the
number of keys.</p>
<pre><code class="lang-js">users =
  { <span class="hljs-number">12</span>: { name: <span class="pl-s">&apos;steve&apos;</span> },
    <span class="hljs-number">23</span>: { name: <span class="pl-s">&apos;bill&apos;</span> } }

names = scour(users).len()  <span class="pl-c">// =&gt; 2</span>

</code></pre>
<h3 id="toarray">toArray</h3>
<blockquote>
<p><code>toArray()</code></p>
</blockquote>
<p>Returns an array. If the the value is an object, it returns the values of
that object.</p>
<pre><code class="lang-js">users =
  { <span class="hljs-number">12</span>: { name: <span class="pl-s">&apos;steve&apos;</span> },
    <span class="hljs-number">23</span>: { name: <span class="pl-s">&apos;bill&apos;</span> } }

names = scour(users).toArray()
<span class="pl-c">// =&gt; [ {name: &apos;steve&apos;}, {name: &apos;bill&apos;} ]</span>

</code></pre>
<h3 id="values">values</h3>
<blockquote>
<p><code>values()</code></p>
</blockquote>
<p>Alias for <code>toArray()</code>.</p>
<h3 id="keys">keys</h3>
<blockquote>
<p><code>keys()</code></p>
</blockquote>
<p>Returns keys. If the value is an array, this returns the array&#x2019;s indices.</p>
<h2 id="writing-methods">Writing methods</h2>
<p>These are methods for modifying an object/array tree immutably.
Note that all these functions are immutable&#x2013;it will not modify existing
data, but rather spawn new objects with the modifications done on them.</p>
<h3 id="set">set</h3>
<blockquote>
<p><code>set(keypath, value)</code></p>
</blockquote>
<p>Sets values immutably. Returns a copy of the same object (<a href="#scour">scour</a>-wrapped)
with the modifications applied.</p>
<pre><code class="lang-js">data = { bob: { name: <span class="pl-s">&apos;Bob&apos;</span> } }
db = scour(data)
db.set([ <span class="pl-s">&apos;bob&apos;</span>, <span class="pl-s">&apos;name&apos;</span> ], <span class="pl-s">&apos;Robert&apos;</span>)
<span class="pl-c">// db.value == { bob: { name: &apos;Robert&apos; } }</span>
</code></pre>
<p><strong>Immutability:</strong>
This is an immutable function, and will return a new object. It won&#x2019;t
modify your original object.</p>
<pre><code class="lang-js">profile = scour({ name: <span class="pl-s">&apos;John&apos;</span> })
profile2 = profile.set(<span class="pl-s">&apos;email&apos;</span>, <span class="pl-s">&apos;john@gmail.com&apos;</span>)

profile.value   <span class="pl-c">// =&gt; { name: &apos;John&apos; }</span>
profile2.value  <span class="pl-c">// =&gt; { name: &apos;John&apos;, email: &apos;john@gmail.com&apos; }</span>
</code></pre>
<p><strong>Using within a scope:</strong>
Be aware that using all writing methods (<a href="#set">set()</a>, [del()], [extend()]) on
scoped objects (ie, made with <a href="#go">go()</a>) will spawn a new <a href="#root">root</a> object. If
you&#x2019;re keeping a reference to the root object, you&#x2019;ll need to update it
accordingly.</p>
<pre><code class="lang-js">db = scour(data)
book = db.go(<span class="pl-s">&apos;book&apos;</span>)
book.root === db       <span class="pl-c">// correct so far</span>

book = book.set(<span class="pl-s">&apos;title&apos;</span>, <span class="pl-s">&apos;IQ84&apos;</span>)
book = book.del(<span class="pl-s">&apos;sale_price&apos;</span>)
book.root !== db      <span class="pl-c">// `root` has been updated</span>
</code></pre>
<p><strong>Dot notation:</strong>
Like <a href="#go">go()</a> and <a href="#get">get()</a>, the keypath can be given in dot notation or an
array.</p>
<pre><code class="lang-js">scour(data).set(<span class="pl-s">&apos;menu.left.visible&apos;</span>, <span class="pl-c1">true</span>)
scour(data).set([<span class="pl-s">&apos;menu&apos;</span>, <span class="pl-s">&apos;left&apos;</span>, <span class="pl-s">&apos;visible&apos;</span>], <span class="pl-c1">true</span>)
</code></pre>
<h3 id="del">del</h3>
<blockquote>
<p><code>del(keypath)</code></p>
</blockquote>
<p>Deletes values immutably. Returns a copy of the same object
(<a href="#scour">scour</a>-wrapped) with the modifications applied.</p>
<p>Like <a href="#set">set()</a>, the keypath can be given in dot notation or an
array.</p>
<pre><code class="lang-js">scour(data).del(<span class="pl-s">&apos;menu.left.visible&apos;</span>)
scour(data).del([<span class="pl-s">&apos;menu&apos;</span>, <span class="pl-s">&apos;left&apos;</span>, <span class="pl-s">&apos;visible&apos;</span>])
</code></pre>
<p>See <a href="#set">set()</a> for more information on working with immutables.</p>
<h3 id="extend">extend</h3>
<blockquote>
<p><code>extend(objects...)</code></p>
</blockquote>
<p>Extends the data with more values. Returns a <a href="#scour">scour</a>-wrapped object. Only
supports objects; arrays and non-objects will return undefined. Just like
<a href="https://devdocs.io/javascript/global_objects/object/assign">Object.assign</a>, you may pass multiple objects to the parameters.</p>
<pre><code class="lang-js">data  = { a: <span class="hljs-number">1</span>, b: <span class="hljs-number">2</span> }
data2 = scour(data).extend({ c: <span class="hljs-number">3</span> })
</code></pre>
<pre><code class="lang-js">data2  <span class="pl-c">// =&gt; [scour { a: 1, b: 2, c: 3 }]</span>
data2.value   <span class="pl-c">// =&gt; { a: 1, b: 2, c: 3 }</span>
</code></pre>
<p>See <a href="#set">set()</a> for more information on working with immutables.</p>
<h2 id="utility-methods">Utility methods</h2>
<p>For stuff.</p>
<h3 id="use">use</h3>
<blockquote>
<p><code>use(extensions)</code></p>
</blockquote>
<p>Extends functionality for certain keypaths with custom methods.
See [Extensions example] for examples.</p>
<pre><code class="lang-js">data =
  { users:
    { <span class="hljs-number">12</span>: { name: <span class="pl-s">&apos;steve&apos;</span>, surname: <span class="pl-s">&apos;jobs&apos;</span> },
      <span class="hljs-number">23</span>: { name: <span class="pl-s">&apos;bill&apos;</span>, surname: <span class="pl-s">&apos;gates&apos;</span> } } }

extensions = {
  <span class="pl-s">&apos;users.*&apos;</span>: {
    fullname () {
      <span class="pl-k">return</span> <span class="pl-k">this</span>.get(<span class="pl-s">&apos;name&apos;</span>) + <span class="pl-s">&apos; &apos;</span> + <span class="pl-k">this</span>.get(<span class="pl-s">&apos;surname&apos;</span>)
    }
  }
}

scour(data)
  .use(extensions)
  .get(<span class="pl-s">&apos;users&apos;</span>, <span class="hljs-number">12</span>)
  .fullname()       <span class="pl-c">// =&gt; &apos;bill gates&apos;</span>
</code></pre>
<p><strong>Extensions format:</strong>
The parameter <code>extension</code> is an object, with keys being keypath globs, and
values being properties to be extended.</p>
<pre><code class="lang-js">.use({
  <span class="pl-s">&apos;books.*&apos;</span>: { ... },
  <span class="pl-s">&apos;authors.*&apos;</span>: { ... },
  <span class="pl-s">&apos;publishers.*&apos;</span>: { ... }
 })
</code></pre>
<p><strong>Extending root:</strong>
To bind properties to the root method, use an empty string as the keypath.</p>
<pre><code class="lang-js">.use({
  <span class="pl-s">&apos;&apos;</span>: {
    users() { <span class="pl-k">return</span> <span class="pl-k">this</span>.go(<span class="pl-s">&apos;users&apos;</span>) },
    authors() { <span class="pl-k">return</span> <span class="pl-k">this</span>.go(<span class="pl-s">&apos;authors&apos;</span>) }
  }
})
</code></pre>
<p><strong>Keypath filtering:</strong>
You can use glob-like <code>*</code> and <code>**</code> to match parts of a keypath. A <code>*</code> will
match any one segment, and <code>**</code> will match one or many segments. Here are
some examples:</p>
<ul>
<li><code>users.*</code> - will match <code>users.1</code>, but not <code>users.1.photos</code></li>
<li><code>users.**</code> - will match <code>users.1.photos</code></li>
<li><code>users.*.photos</code> - will match <code>users.1.photos</code></li>
<li><code>**</code> will match anything</li>
</ul>
<p><strong>When using outside root:</strong>
Any extensions in a scoped object (ie, made with <a href="#go">go()</a>) will be used relative
to it. For instance, if you define an extension to <code>admins.*</code> inside
<code>.go(&apos;users&apos;)</code>, it will affect `users.</p>
<pre><code class="lang-js">data = { users: { john: { } }
db = scour(data)

users = db.go(<span class="pl-s">&apos;users&apos;</span>)
  .use({ <span class="pl-s">&apos;*&apos;</span>: { hasName () { <span class="pl-k">return</span> !!<span class="pl-k">this</span>.get(<span class="pl-s">&apos;name&apos;</span>) } })

users.go(<span class="pl-s">&apos;john&apos;</span>).hasName()      <span class="pl-c">// works</span>
</code></pre>
<p>While this is supported, it is <em>not</em> recommended: these extensions will not
propagate back to the root, and any objects taken from the root will not
have those extensions applied to them.</p>
<pre><code class="lang-js">users.go(<span class="pl-s">&apos;john&apos;</span>).hasName()              <span class="pl-c">// works</span>
db.go(<span class="pl-s">&apos;users.john&apos;</span>).hasName()           <span class="pl-c">// doesn&apos;t work</span>
</code></pre>
<h3 id="tojson">toJSON</h3>
<blockquote>
<p><code>toJSON()</code></p>
</blockquote>
<p>Returns the value for serialization. This allows <code>JSON.stringify()</code> to
work with <code>scour</code>-wrapped objects. The name of this method is a bit
confusing, as it doesn&#x2019;t actually return a JSON string &#x2014; but I&#x2019;m afraid
that it&#x2019;s the way that the JavaScript API for <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#toJSON%28%29_behavior">JSON.stringify</a> works.</p>
<h2 id="iteration-methods">Iteration methods</h2>
<p>For traversing.</p>
<h3 id="foreach">forEach</h3>
<blockquote>
<p><code>forEach(function(item, key))</code></p>
</blockquote>
<p>Loops through each item. Supports both arrays and objects. The <code>item</code>s
passed to the function will be returned as a <a href="#scour">scour</a> instance.</p>
<pre><code class="lang-js">users =
  { <span class="hljs-number">12</span>: { name: <span class="pl-s">&apos;steve&apos;</span> },
    <span class="hljs-number">23</span>: { name: <span class="pl-s">&apos;bill&apos;</span> } }

scour(users).each((user, key) =&gt; {
  <span class="pl-c1">console</span>.log(user.get(<span class="pl-s">&apos;name&apos;</span>))
})
</code></pre>
<p>The values passed onto the function are:</p>
<ul>
<li><code>item</code> - the value; always a scour object.</li>
<li><code>key</code> - the key.</li>
</ul>
<p>The value being passed onto the function is going to be a <a href="#scour">scour</a> object.
Use <code>item.value</code> or <code>this</code> to access the raw values.</p>
<h3 id="each">each</h3>
<blockquote>
<p><code>each(fn)</code></p>
</blockquote>
<p>Alias for <a href="#foreach">forEach</a>.</p>
<h3 id="map">map</h3>
<blockquote>
<p><code>map(function(item, key))</code></p>
</blockquote>
<p>Loops through each item and returns an array based on the iterator&#x2019;s
return values. Supports both arrays and objects. The <code>item</code>s passed to
the function will be returned as a <a href="#scour">scour</a> instance.</p>
<pre><code class="lang-js">users =
  { <span class="hljs-number">12</span>: { name: <span class="pl-s">&apos;steve&apos;</span> },
    <span class="hljs-number">23</span>: { name: <span class="pl-s">&apos;bill&apos;</span> } }

names = scour(users).map((user, key) =&gt; user.get(<span class="pl-s">&apos;name&apos;</span>))
<span class="pl-c">// =&gt; [ &apos;steve&apos;, &apos;bill&apos; ]</span>

</code></pre>
<h2 id="utility-functions">Utility functions</h2>
<p>These are utilities that don&#x2019;t need a wrapped object.</p>
<h3 id="scour.set">scour.set</h3>
<blockquote>
<p><code>scour.set(object, keypath, value)</code></p>
</blockquote>
<p>Sets a <code>keypath</code> into an <code>object</code> immutably.</p>
<pre><code class="lang-js">data = { users: { bob: { name: <span class="pl-s">&apos;john&apos;</span> } } }

result = set(data, [<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;bob&apos;</span>, <span class="pl-s">&apos;name&apos;</span>], <span class="pl-s">&apos;robert&apos;</span>)
<span class="pl-c">// =&gt; { users: { bob: { name: &apos;robert&apos; } } }</span>
</code></pre>
<p>This is also available as <code>require(&apos;scourjs/utilities/set&apos;)</code>.</p>
<h3 id="scour.del">scour.del</h3>
<blockquote>
<p><code>scour.del(object, keypath)</code></p>
</blockquote>
<p>Deletes a <code>keypath</code> from an <code>object</code> immutably.</p>
<pre><code class="lang-js">data = { users: { bob: { name: <span class="pl-s">&apos;robert&apos;</span> } } }
result = del(data, [<span class="pl-s">&apos;users&apos;</span>, <span class="pl-s">&apos;bob&apos;</span>, <span class="pl-s">&apos;name&apos;</span>])

<span class="pl-c">// =&gt; { users: { bob: {} } }</span>
</code></pre>
<p>This is also available as <code>require(&apos;scourjs/utilities/del&apos;)</code>.</p>
<h3 id="scour.each">scour.each</h3>
<blockquote>
<p><code>scour.each(iterable, fn)</code></p>
</blockquote>
<p>Iterates through <code>iterable</code>, either an object or an array. This is an
implementation of <code>Array.forEach</code> that also works for objects.</p>
<p>This is also available as <code>require(&apos;scourjs/utilities/each&apos;)</code>.</p>
<h3 id="scour.map">scour.map</h3>
<blockquote>
<p><code>scour.map(iterable, fn)</code></p>
</blockquote>
<p>Works like Array#map, but also works on objects.</p>
<p>This is also available as <code>require(&apos;scourjs/utilities/map&apos;)</code>.</p>
<!--api:end-->
<h2 id="thanks">Thanks</h2>
<p><strong>scour</strong> &#xA9; 2015+, Rico Sta. Cruz. Released under the <a href="http://mit-license.org/">MIT</a> License.<br>
Authored and maintained by Rico Sta. Cruz with help from contributors (<a href="http://github.com/rstacruz/scour/contributors">list</a>).</p>
<blockquote>
<p><a href="http://ricostacruz.com">ricostacruz.com</a> &#xA0;&#xB7;&#xA0;
GitHub <a href="https://github.com/rstacruz">@rstacruz</a> &#xA0;&#xB7;&#xA0;
Twitter <a href="https://twitter.com/rstacruz">@rstacruz</a></p>
</blockquote>

        </div>
        <div class="footer-nav">
          <div class="right"><a href="comparison.html"><span class="label">Next: </span><span class="title">Comparison with others</span></a></div>
        </div>
      </div>
      <div class="menu toc-menu">
        <li class="menu-item -level-0 -parent">
          <ul class="submenu">
            <li class="menu-item -level-1"><a href="index.html" class="link title -active link-index">scour.js</a>
            </li>
            <li class="menu-item -level-1"><a href="#install" class="link title link-install">Install</a>
            </li>
            <li class="menu-item -level-1 -parent"><a href="#features" class="link title link-features">Features</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="#traversal" class="link title link-traversal">Traversal</a>
                </li>
                <li class="menu-item -level-2"><a href="#chaining" class="link title link-chaining">Chaining</a>
                </li>
                <li class="menu-item -level-2"><a href="#immutable-modifications" class="link title link-immutable-modifications">Immutable modifications</a>
                </li>
                <li class="menu-item -level-2"><a href="#advanced-traversing" class="link title link-advanced-traversing">Advanced traversing</a>
                </li>
                <li class="menu-item -level-2"><a href="#models" class="link title link-models">Models</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a href="#api" class="link title link-api">API</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="#scour" class="link title link-scour">scour</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a href="#attributes" class="link title link-attributes">Attributes</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="#value" class="link title link-value">value</a>
                </li>
                <li class="menu-item -level-2"><a href="#root" class="link title link-root">root</a>
                </li>
                <li class="menu-item -level-2"><a href="#keypath" class="link title link-keypath">keypath</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a href="#traversal-methods" class="link title link-traversal-methods">Traversal methods</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="#go" class="link title link-go">go</a>
                </li>
                <li class="menu-item -level-2"><a href="#at" class="link title link-at">at</a>
                </li>
                <li class="menu-item -level-2"><a href="#filter" class="link title link-filter">filter</a>
                </li>
                <li class="menu-item -level-2"><a href="#find" class="link title link-find">find</a>
                </li>
                <li class="menu-item -level-2"><a href="#first" class="link title link-first">first</a>
                </li>
                <li class="menu-item -level-2"><a href="#last" class="link title link-last">last</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a href="#reading-methods" class="link title link-reading-methods">Reading methods</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="#get" class="link title link-get">get</a>
                </li>
                <li class="menu-item -level-2"><a href="#len" class="link title link-len">len</a>
                </li>
                <li class="menu-item -level-2"><a href="#toarray" class="link title link-toarray">toArray</a>
                </li>
                <li class="menu-item -level-2"><a href="#values" class="link title link-values">values</a>
                </li>
                <li class="menu-item -level-2"><a href="#keys" class="link title link-keys">keys</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a href="#writing-methods" class="link title link-writing-methods">Writing methods</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="#set" class="link title link-set">set</a>
                </li>
                <li class="menu-item -level-2"><a href="#del" class="link title link-del">del</a>
                </li>
                <li class="menu-item -level-2"><a href="#extend" class="link title link-extend">extend</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a href="#utility-methods" class="link title link-utility-methods">Utility methods</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="#use" class="link title link-use">use</a>
                </li>
                <li class="menu-item -level-2"><a href="#tojson" class="link title link-tojson">toJSON</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a href="#iteration-methods" class="link title link-iteration-methods">Iteration methods</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="#foreach" class="link title link-foreach">forEach</a>
                </li>
                <li class="menu-item -level-2"><a href="#each" class="link title link-each">each</a>
                </li>
                <li class="menu-item -level-2"><a href="#map" class="link title link-map">map</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a href="#utility-functions" class="link title link-utility-functions">Utility functions</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="#scour.set" class="link title link-scour.set">scour.set</a>
                </li>
                <li class="menu-item -level-2"><a href="#scour.del" class="link title link-scour.del">scour.del</a>
                </li>
                <li class="menu-item -level-2"><a href="#scour.each" class="link title link-scour.each">scour.each</a>
                </li>
                <li class="menu-item -level-2"><a href="#scour.map" class="link title link-scour.map">scour.map</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1"><a href="#thanks" class="link title link-thanks">Thanks</a>
            </li>
            <li class="menu-item -level-1 -parent"><span class="title">Appendix</span>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="comparison.html" class="link title  link-comparison">Comparison with others</a>
                </li>
                <li class="menu-item -level-2"><a href="extensions_example.html" class="link title  link-extensions_example">Extensions example</a>
                </li>
                <li class="menu-item -level-2"><a href="redux_example.html" class="link title  link-redux_example">Redux example</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </div>
    </div>
  </body>
</html>