!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.scour=t()}}(function(){return function t(n,e,r){function i(u,a){if(!e[u]){if(!n[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(o)return o(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var c=e[u]={exports:{}};n[u][0].call(c.exports,function(t){var e=n[u][1][t];return i(e?e:t)},c,c.exports,t,n,e,r)}return e[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(t,n){"use strict";var e=t("../utilities/map");n.exports=function(t,n){var r=t.length?t.join(".")+".":"";return e(n,function(t,n){return n=(r+n).replace(/\./g,"\\.").replace(/\*\*/g,"::all::").replace(/\*/g,"::any::").replace(/::all::/g,".*").replace(/::any::/g,"[^.]+"),n=new RegExp("^"+n+"$"),[n,t]})}},{"../utilities/map":19}],2:[function(t,n){"use strict";n.exports=function(t){return function(){return!t.apply(this,arguments)}}},{}],3:[function(t,n){"use strict";n.exports=function(t,n){return"string"==typeof t?t.split("."):n&&1===t.length?Array.isArray(t[0])?t[0].map(function(t){return""+t}):"number"==typeof t[0]?[""+t[0]]:(""+t[0]).split("."):(n&&(t=Array.prototype.slice.call(t)),t.map(function(t){return""+t}))}},{}],4:[function(t,n){"use strict";var e=t("../utilities/indexed_map"),r=t("../utilities/map");n.exports=function(t,n){var i=t.sort(function(t,n){var e=t.criteria,r=n.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(r>e||void 0===r)return-1}return e.index-r.index});return n===!1?e(i,function(t){return[t.key,t.value]}):r(i,function(t){return t.value})}},{"../utilities/indexed_map":18,"../utilities/map":19}],5:[function(t,n){"use strict";function e(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;n.exports=Object.assign||function(t){for(var n,o,u=e(t),a=1;a<arguments.length;a++){n=Object(arguments[a]);for(var s in n)r.call(n,s)&&(u[s]=n[s]);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(n);for(var f=0;f<o.length;f++)i.call(n,o[f])&&(u[o[f]]=n[o[f]])}}return u}},{}],6:[function(t,n){!function(){"use strict";function t(t){return"function"==typeof t}function e(t){return"[object Array]"===Object.prototype.toString.call(t)}function r(t){return t instanceof Date?t.getTime():t instanceof Array?t.map(r):t}function i(t){return function(n,r){if(!e(r)||!r.length)return t(n,r);for(var i=0,o=r.length;o>i;i++)if(t(n,r[i]))return!0;return!1}}function o(t){return function(n,r){if(!e(r)||!r.length)return t(n,r);for(var i=0,o=r.length;o>i;i++)if(!t(n,r[i]))return!1;return!0}}function u(t,n){return t.v(t.a,n)}function a(t,n){for(var e=0;e<t.length;e++)if(u(n,t[e]))return e;return-1}function s(t,n){return{a:t,v:n}}function f(t,n){var e=[];return c(n,t.k,0,e),1===e.length?u(t.nv,e[0]):!!~a(e,t.nv)}function c(t,n,r,i){if(r===n.length||void 0==t)return void i.push(t);if(e(t))for(var o=0,u=t.length;u>o;o++)c(t[o],n,r,i);else c(t[n[r]],n,r+1,i)}function l(t,n){return{a:{k:t,nv:n},v:f}}function h(t){t=r(t),(!t||"Object"!==t.constructor.toString()&&"functionObject(){[nativecode]}"!==t.constructor.toString().replace(/\n/g,"").replace(/ /g,""))&&(t={$eq:t});var n=[];for(var e in t){var i=t[e];if("$options"!==e)if(g[e])d[e]&&(i=d[e](i,t)),n.push(s(r(i),g[e]));else{if(36===e.charCodeAt(0))throw new Error("Unknown operation "+e);n.push(l(e.split("."),h(i)))}}return 1===n.length?n[0]:s(n,g.$and)}function p(t,n){var e=h(t);return n&&(e={a:e,v:function(t,e){return u(t,n(e))}}),e}function v(n,e,r){function i(t){return u(o,t)}t(e)&&(r=e,e=void 0);var o=p(n,r);return e?Array.isArray(e)?e.filter(i):y(e,i):i}function y(t,n){var e={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];n(i)&&(e[r]=i)}return e}var g={$eq:i(function(t,n){return t(n)}),$ne:o(function(t,n){return!t(n)}),$or:function(t,n){for(var e=0,r=t.length;r>e;e++)if(u(t[e],n))return!0;return!1},$gt:i(function(t,n){return typeof r(n)==typeof t&&r(n)>t}),$gte:i(function(t,n){return typeof r(n)==typeof t&&r(n)>=t}),$lt:i(function(t,n){return typeof r(n)==typeof t&&r(n)<t}),$lte:i(function(t,n){return typeof r(n)==typeof t&&r(n)<=t}),$mod:i(function(t,n){return n%t[0]==t[1]}),$in:function(t,n){if(!(n instanceof Array))return!!~t.indexOf(r(n));for(var e=n.length;e--;)if(~t.indexOf(r(n[e])))return!0;return!1},$nin:function(t,n){return!g.$in(t,n)},$not:function(t,n){return!u(t,n)},$type:function(t,n){return void 0!=n?n instanceof t||n.constructor==t:!1},$all:function(t,n){n||(n=[]);for(var e=t.length;e--;)if(!~r(n).indexOf(t[e]))return!1;return!0},$size:function(t,n){return n?t===n.length:!1},$nor:function(t,n){for(var e=0,r=t.length;r>e;e++)if(u(t[e],n))return!1;return!0},$and:function(t,n){for(var e=0,r=t.length;r>e;e++)if(!u(t[e],n))return!1;return!0},$regex:i(function(t,n){return"string"==typeof n&&t.test(n)}),$where:function(t,n){return t.call(n,n)},$elemMatch:function(t,n){return e(n)?!!~a(n,t):u(t,n)},$exists:function(t,n){return void 0!=n===t}},d={$eq:function(t){return t instanceof RegExp?function(n){return"string"==typeof n&&t.test(n)}:t instanceof Function?t:e(t)&&!t.length?function(t){return e(t)&&!t.length}:null===t?function(t){return null==t}:function(n){return t===r(n)}},$ne:function(t){return d.$eq(t)},$and:function(t){return t.map(h)},$or:function(t){return t.map(h)},$nor:function(t){return t.map(h)},$not:function(t){return h(t)},$regex:function(t,n){return new RegExp(t,n.$options)},$where:function(t){return"string"==typeof t?new Function("obj","return "+t):t},$elemMatch:function(t){return h(t)},$exists:function(t){return!!t}};v.use=function(n){if(t(n))return n(v);for(var e in n)36===e.charCodeAt(0)&&(g[e]=n[e])},v.indexOf=function(t,n,e){return a(n,p(t,e))},v.keyOf=function(t,n,e){var r=p(t,e);for(var i in n)if(n.hasOwnProperty(i)&&u(r,n[i]))return i},"undefined"!=typeof n&&"undefined"!=typeof n.exports&&(n.exports=v),"undefined"!=typeof window&&(window.sift=v)}()},{}],7:[function(t,n){function e(t){switch({}.toString.call(t)){case"[object Object]":return u(t);case"[object Function]":return t;case"[object String]":return o(t);case"[object RegExp]":return i(t);default:return r(t)}}function r(t){return function(n){return t===n}}function i(t){return function(n){return t.test(n)}}function o(t){return/^ *\W+/.test(t)?new Function("_","return _ "+t):new Function("_","return "+a(t))}function u(t){var n={};for(var i in t)n[i]="string"==typeof t[i]?r(t[i]):e(t[i]);return function(t){if("object"!=typeof t)return!1;for(var e in n){if(!(e in t))return!1;if(!n[e](t[e]))return!1}return!0}}function a(t){var n=f(t);if(!n.length)return"_."+t;var e,r,i;for(r=0;r<n.length;r++)i=n[r],e="_."+i,e="('function' == typeof "+e+" ? "+e+"() : "+e+")",t=s(i,t,e);return t}function s(t,n,e){return n.replace(new RegExp("(\\.)?"+t,"g"),function(t,n){return n?t:e})}var f;try{f=t("props")}catch(c){f=t("component-props")}n.exports=e},{"component-props":8,props:8}],8:[function(t,n){function e(t){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\//g,"").replace(u,"").match(/[a-zA-Z_]\w*/g)||[]}function r(t,n,e){var r=/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\/|[a-zA-Z_]\w*/g;return t.replace(r,function(t){return"("==t[t.length-1]?e(t):~n.indexOf(t)?e(t):t})}function i(t){for(var n=[],e=0;e<t.length;e++)~n.indexOf(t[e])||n.push(t[e]);return n}function o(t){return function(n){return t+n}}var u=/\b(Array|Date|Object|Math|JSON)\b/g;n.exports=function(t,n){var u=i(e(t));return n&&"string"==typeof n&&(n=o(n)),n?r(t,u,n):u}},{}],9:[function(t,n){"use strict";function e(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function r(t,n){return this instanceof r?(this.value=t,this.root=n&&n.root||this,this.keypath=n&&n.keypath||[],this.extensions=n&&n.extensions||[],void(this.extensions.length&&this.applyExtensions())):new r(t,n)}function i(t){return function(){return t.bind(null,this.forEach.bind(this)).apply(this,arguments)}}var o=t("sift"),u=t("object-assign"),a=t("./lib/build_extensions"),s=t("./lib/normalize_keypath"),f=t("./utilities"),c=t("./lib/negate"),l=t("./lib/sort_values"),h=t("to-function");r.prototype={go:function(){var t=s(arguments,!0),n=this.get.apply(this,t);return this._get(n,t)},gather:function(t){var n,e=this;return n=Array.isArray(this.value)?t.map(function(t){return e.get(t)}):f.indexedMap(t,function(t){return[t,e.get(t)]}),this.replace(n)},at:function(t){if(Array.isArray(this.value))return this._get(this.value[t],[""+t]);var n=this.keys()[t];return this._get(n&&this.value[n],[""+n])},getAt:function(t){if(Array.isArray(this.value))return this.value[t];var n=this.keys()[t];return n&&this.value[n]},filter:function(t){return this.value?"function"==typeof t?this.filterByFunction(t):this.replace(o(t,this.value)):this.replace([])},filterByFunction:function(t){var n,e=Array.isArray(this.value);return e?(n=[],this.each(function(e,r){return t(e,r)&&n.push(e.value)})):(n={},this.each(function(e,r){t(e,r)&&(n[r]=e.value)})),this.replace(n)},reject:function(t){return this.value?"function"==typeof t?this.filterByFunction(c(t)):this.filter({$not:t}):this.replace([])},find:function(t){var n=o.keyOf(t,this.value);if("undefined"!=typeof n)return this._get(this.value[n],[n])},first:function(){return this.at(0)},last:function(){var t=this.len();return this.at(t-1)},sortBy:function(t){if(!this.value)return this.replace([]);var n;if("string"==typeof t){var e=t;t=h(e),n=f.map(this.value,function(n,e,r){return{key:e,value:n,criteria:t(n,e),index:r}})}else n=this.map(function(n,e,r){return{key:e,value:n.value,criteria:t(n,e),index:r}});var r=l(n,Array.isArray(this.value));return this.replace(r)},get:function(){if(this.value){var t=s(arguments,!0);return f.get(this.value,t)}},len:function(){return this.value?Array.isArray(this.value)?this.value.length:this.keys().length:0},toArray:function(){return Array.isArray(this.value)?this.value:r.map(this.value,function(t){return t})},values:function(){return this.toArray()},keys:function(){return this.value?Object.keys(this.value):[]},set:function(t,n){if(t=s(t),this.root!==this)return this.root.set(this.keypath.concat(t),n).go(this.keypath);var e=r.set(this.value||{},t,n.valueOf());return this.replace(e,{root:null})},del:function(t){if(!this.value)return this;if(t=s(t),this.root!==this)return this.root.del(this.keypath.concat(t)).go(this.keypath);var n=r.del(this.value,t);return this.replace(n,{root:null})},extend:function(){if("object"===e(this.value)&&!Array.isArray(this.value)){var t={};u(t,this.value);for(var n=0,r=arguments.length;r>n;n++){if("object"!==e(arguments[n]))return;u(t,arguments[n])}return this.root!==this?this.root.set(this.keypath,t).go(this.keypath):this.replace(t,{root:!1})}},use:function(t){var n=a(this.keypath,t);return this.root===this?this.replace(this.value,{extensions:n,root:null}):this.root.replace(this.root.value,{extensions:n,root:null}).replace(this.value,{keypath:this.keypath})},toJSON:function(){return this.value},valueOf:function(){return this.value},toString:function(){return"[scour ("+this.keys().join(", ")+")]"},forEach:function(t){var n=this,e=0;return r.each(this.value,function(r,i){t.call(r,n._get(r,[i]),i,e++)}),this},each:function(t){return this.forEach(t)},map:i(f.map),mapObject:i(f.mapObject),indexedMap:i(f.indexedMap),_get:function(t,n){return this.replace(t,{keypath:this.keypath.concat(n)})},replace:function(t,n){var e=n||{};return new r(t,{root:"undefined"!=typeof e.root?e.root:this.root,keypath:"undefined"!=typeof e.keypath?e.keypath:this.keypath,extensions:"undefined"!=typeof e.extensions?this.extensions.concat(e.extensions):this.extensions})},applyExtensions:function(){var t=this,n=this.keypath.join(".");this.extensions.forEach(function(e){e[0].test(n)&&u(t,e[1])})}},u(r,f),n.exports=r},{"./lib/build_extensions":1,"./lib/negate":2,"./lib/normalize_keypath":3,"./lib/sort_values":4,"./utilities":17,"object-assign":5,sift:6,"to-function":7}],10:[function(t,n){"use strict";n.exports=function(n){var e=t("object-assign");return Array.isArray(n)?[].slice.call(n):e({},n)}},{"object-assign":5}],11:[function(t,n){"use strict";n.exports=function(t,n){if(Array.isArray(t))return t.slice(0,+n).concat(t.slice(+n+1));var e={};n=""+n;for(var r in t)t.hasOwnProperty(r)&&n!==r&&(e[r]=t[r]);return e}},{}],12:[function(t,n){"use strict";function e(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}var r=t("./clone"),i=t("./clone_without");n.exports=function(t,n){for(var o={},u={},a=0,s=n.length;s>a;a++)if(0===a)u[a]=t;else if(u[a]=u[a-1][n[a-1]],!u[a]||"object"!==e(u[a]))return t;for(var a=n.length-1;a>=0;a--)a===n.length-1?(o[a]=i(u[a],n[a]),delete o[a][n[a]]):(o[a]=r(u[a]),o[a][n[a]]=o[a+1]);return o[0]}},{"./clone":10,"./clone_without":11}],13:[function(t,n){"use strict";function e(t,n){if(t){var r,i,o=t.length;if("number"==typeof o){if(e["native"])return e["native"].call(t,n);for(r=0;o>r;r++)n(t[r],r,r)}else{i=0;for(r in t)t.hasOwnProperty(r)&&n(t[r],r,i++)}return t}}e["native"]=Array.prototype.forEach,n.exports=e},{}],14:[function(t,n){"use strict";var e=t("./get"),r=t("./set"),i=t("object-assign");n.exports=function(t,n,o){if(0===n.length)return i({},t,o);for(var u=i({},e(t,n)),a=2,s=arguments.length;s>a;a++)i(u,arguments[a]);return r(t,n,u)}},{"./get":16,"./set":21,"object-assign":5}],15:[function(t,n){"use strict";var e=t("./each");n.exports=function(t,n,r){var i,o="undefined"!=typeof r?r:Array.isArray(t);return"function"!=typeof t&&(t=e.bind(this,t)),o?(i=[],t(function(t){n.apply(this,arguments)&&i.push(t)})):(i={},t(function(t,e){n.apply(this,arguments)&&(i[e]=t)})),i}},{"./each":13}],16:[function(t,n){"use strict";n.exports=function(t,n){for(var e=t,r=0,i=n.length;i>r;r++)if(e=e[n[r]],!e)return e;return e}},{}],17:[function(t,n,e){"use strict";e.get=t("./get"),e.set=t("./set"),e.del=t("./del"),e.extendIn=t("./extend_in"),e.each=t("./each"),e.map=t("./map"),e.mapObject=t("./map_object"),e.indexedMap=t("./indexed_map"),e.filter=t("./filter"),e.sortBy=t("./sort_by")},{"./del":12,"./each":13,"./extend_in":14,"./filter":15,"./get":16,"./indexed_map":18,"./map":19,"./map_object":20,"./set":21,"./sort_by":22}],18:[function(t,n){"use strict";var e=t("./each");n.exports=function(t,n){"function"!=typeof t&&(t=e.bind(this,t));var r={};return t(function(){var t=n.apply(this,arguments);r[t[0]]=t[1]}),r}},{"./each":13}],19:[function(t,n){"use strict";var e=t("./each");n.exports=function(t,n){"function"!=typeof t&&(t=e.bind(this,t));var r=[];return t(function(){r.push(n.apply(this,arguments))}),r}},{"./each":13}],20:[function(t,n){"use strict";var e=t("./each");n.exports=function(t,n){"function"!=typeof t&&(t=e.bind(this,t));var r={};return t(function(t,e){r[e]=n.apply(this,arguments)}),r}},{"./each":13}],21:[function(t,n){"use strict";function e(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}var r=t("./clone");n.exports=function(t,n,i){for(var o={},u={},a=0,s=n.length;s>a;a++)0===a?u[a]=t:(u[a]=u[a-1][n[a-1]]||{},"object"!==e(u[a])&&(u[a]={}));for(var a=n.length;a>=0;a--)u[a]?(o[a]=r(u[a]),o[a][n[a]]=o[a+1]):o[a]=i;return o[0]}},{"./clone":10}],22:[function(t,n){"use strict";var e=t("./map"),r=t("./each"),i=t("to-function"),o=t("../lib/sort_values");n.exports=function(t,n,u){"undefined"!=typeof u||Array.isArray(t)||(u=!1),"function"!=typeof t&&(t=r.bind(this,t)),n=i(n);var a=e(t,function(t,e,r){return{key:e,value:t,criteria:n(t,e),index:r}});return o(a,u)}},{"../lib/sort_values":4,"./each":13,"./map":19,"to-function":7}]},{},[9])(9)});