!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.scour=n()}}(function(){return function n(t,r,e){function i(u,f){if(!r[u]){if(!t[u]){var a="function"==typeof require&&require;if(!f&&a)return a(u,!0);if(o)return o(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var s=r[u]={exports:{}};t[u][0].call(s.exports,function(n){var r=t[u][1][n];return i(r?r:n)},s,s.exports,n,t,r,e)}return r[u].exports}for(var o="function"==typeof require&&require,u=0;u<e.length;u++)i(e[u]);return i}({1:[function(n,t){"use strict";t.exports={map:function(n,t){var r=[];return n.forEach(function(){r.push(t.apply(this,arguments))}),r}}},{}],2:[function(n,t){"use strict";var r;r=Object.defineProperty?function(n,t,r){Object.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:!0,value:r})}:function(n,t,r){n[t]=r},t.exports=r},{}],3:[function(n,t){"use strict";function r(n,t){var r,e,i=n.length;if("number"==typeof i)for(r=0;i>r;r++)t(n[r],r);else{e=0;for(r in n)n.hasOwnProperty(r)&&t(n[r],r,e++)}return n}t.exports=r},{}],4:[function(n,t){"use strict";function r(n,t){var e=this;return this instanceof r?(this.data=n,o(this,"root",t&&t.root||this),o(this,"keypath",t&&t.keypath||[]),o(this,"extensions",t&&t.extensions||[]),void this.extensions.forEach(function(n){i(n,function(n,t){e[t]=n})})):new r(n,t)}var e=n("sift"),i=n("./each"),o=n("./define_property"),u=n("./collections");r.prototype={go:function(n){n=[].slice.apply(arguments).map(function(n){return""+n});var t=this.get.apply(this,n);return this._get(t,n,!0)},get:function(n){var t=this.data;n=[].slice.apply(arguments);for(var r=0,e=arguments.length;e>r;r++)if(t=t[arguments[r]],!t)return;return t},_get:function(n,t){return"undefined"==typeof n||null===n?n:this.spawn(n,{keypath:this.keypath.concat(t)})},at:function(n){var t=this.keys()[n];return this._get(this.data[t],[t])},set:function(n,t){return Array.isArray(n)||(n=[n]),this.root!==this?this.root.set(this.keypath.concat(n),t):void 0},spawn:function(n,t){return new r(n||this.data,{root:t&&t.root||this.root,keypath:t&&t.keypath||this.keypath,extensions:this.extensions.concat(t&&t.extensions||[])})},forEach:function(n){var t=this;return i(this.data,function(r,e){n(t._get(r,[e]),e,r)}),this},each:function(n){return this.forEach(n)},map:function(n){return u.map(this,n)},len:function(){return Array.isArray(this.data)?this.data.length:this.keys().length},toArray:function(){return Array.isArray(this.data)?this.data:this.map(function(n){return n})},values:function(){return this.toArray()},keys:function(){return Object.keys(this.data)},where:function(n){var t=e(n,this.data);return this._get(t,[])},find:function(n){var t=e.keyOf(n,this.data);if("undefined"!=typeof t)return this._get(this.data[t],[t])},extend:function(n){return this.spawn(this.data,{extensions:[n]})},toJSON:function(){return this.data},toString:function(){return"[scour ("+this.keys().join(", ")+")]"}},t.exports=r},{"./collections":1,"./define_property":2,"./each":3,sift:5}],5:[function(n,t){!function(){"use strict";function n(n){return"function"==typeof n}function r(n){return"[object Array]"===Object.prototype.toString.call(n)}function e(n){return n instanceof Date?n.getTime():n instanceof Array?n.map(e):n}function i(n){return function(t,e){if(!r(e)||!e.length)return n(t,e);for(var i=0,o=e.length;o>i;i++)if(n(t,e[i]))return!0;return!1}}function o(n){return function(t,e){if(!r(e)||!e.length)return n(t,e);for(var i=0,o=e.length;o>i;i++)if(!n(t,e[i]))return!1;return!0}}function u(n,t){return n.v(n.a,t)}function f(n,t){for(var r=0;r<n.length;r++)if(u(t,n[r]))return r;return-1}function a(n,t){return{a:n,v:t}}function c(n,t){var r=[];return s(t,n.k,0,r),1===r.length?u(n.nv,r[0]):!!~f(r,n.nv)}function s(n,t,e,i){if(e===t.length||void 0==n)return void i.push(n);if(r(n))for(var o=0,u=n.length;u>o;o++)s(n[o],t,e,i);else s(n[t[e]],t,e+1,i)}function h(n,t){return{a:{k:n,nv:t},v:c}}function p(n){n=e(n),(!n||"Object"!==n.constructor.toString()&&"functionObject(){[nativecode]}"!==n.constructor.toString().replace(/\n/g,"").replace(/ /g,""))&&(n={$eq:n});var t=[];for(var r in n){var i=n[r];if("$options"!==r)if(v[r])g[r]&&(i=g[r](i,n)),t.push(a(e(i),v[r]));else{if(36===r.charCodeAt(0))throw new Error("Unknown operation "+r);t.push(h(r.split("."),p(i)))}}return 1===t.length?t[0]:a(t,v.$and)}function l(n,t){var r=p(n);return t&&(r={a:r,v:function(n,r){return u(n,t(r))}}),r}function d(t,r,e){function i(n){return u(o,n)}n(r)&&(e=r,r=void 0);var o=l(t,e);return r?Array.isArray(r)?r.filter(i):y(r,i):i}function y(n,t){var r={};for(var e in n)if(n.hasOwnProperty(e)){var i=n[e];t(i)&&(r[e]=i)}return r}var v={$eq:i(function(n,t){return n(t)}),$ne:o(function(n,t){return!n(t)}),$or:function(n,t){for(var r=0,e=n.length;e>r;r++)if(u(n[r],t))return!0;return!1},$gt:i(function(n,t){return typeof e(t)==typeof n&&e(t)>n}),$gte:i(function(n,t){return typeof e(t)==typeof n&&e(t)>=n}),$lt:i(function(n,t){return typeof e(t)==typeof n&&e(t)<n}),$lte:i(function(n,t){return typeof e(t)==typeof n&&e(t)<=n}),$mod:i(function(n,t){return t%n[0]==n[1]}),$in:function(n,t){if(!(t instanceof Array))return!!~n.indexOf(e(t));for(var r=t.length;r--;)if(~n.indexOf(e(t[r])))return!0;return!1},$nin:function(n,t){return!v.$in(n,t)},$not:function(n,t){return!u(n,t)},$type:function(n,t){return void 0!=t?t instanceof n||t.constructor==n:!1},$all:function(n,t){t||(t=[]);for(var r=n.length;r--;)if(!~e(t).indexOf(n[r]))return!1;return!0},$size:function(n,t){return t?n===t.length:!1},$nor:function(n,t){for(var r=0,e=n.length;e>r;r++)if(u(n[r],t))return!1;return!0},$and:function(n,t){for(var r=0,e=n.length;e>r;r++)if(!u(n[r],t))return!1;return!0},$regex:i(function(n,t){return"string"==typeof t&&n.test(t)}),$where:function(n,t){return n.call(t,t)},$elemMatch:function(n,t){return r(t)?!!~f(t,n):u(n,t)},$exists:function(n,t){return void 0!=t===n}},g={$eq:function(n){return n instanceof RegExp?function(t){return"string"==typeof t&&n.test(t)}:n instanceof Function?n:r(n)&&!n.length?function(n){return r(n)&&!n.length}:null===n?function(n){return null==n}:function(t){return n===e(t)}},$ne:function(n){return g.$eq(n)},$and:function(n){return n.map(p)},$or:function(n){return n.map(p)},$nor:function(n){return n.map(p)},$not:function(n){return p(n)},$regex:function(n,t){return new RegExp(n,t.$options)},$where:function(n){return"string"==typeof n?new Function("obj","return "+n):n},$elemMatch:function(n){return p(n)},$exists:function(n){return!!n}};d.use=function(t){if(n(t))return t(d);for(var r in t)36===r.charCodeAt(0)&&(v[r]=t[r])},d.indexOf=function(n,t,r){return f(t,l(n,r))},d.keyOf=function(n,t,r){var e=l(n,r);for(var i in t)if(t.hasOwnProperty(i)&&u(e,t[i]))return i},"undefined"!=typeof t&&"undefined"!=typeof t.exports&&(t.exports=d),"undefined"!=typeof window&&(window.sift=d)}()},{}]},{},[4])(4)});