!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.scour=t()}}(function(){return function t(n,e,r){function i(u,f){if(!e[u]){if(!n[u]){var s="function"==typeof require&&require;if(!f&&s)return s(u,!0);if(o)return o(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var a=e[u]={exports:{}};n[u][0].call(a.exports,function(t){var e=n[u][1][t];return i(e?e:t)},a,a.exports,t,n,e,r)}return e[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(t,n){"use strict";function e(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;n.exports=Object.assign||function(t){for(var n,o,u=e(t),f=1;f<arguments.length;f++){n=Object(arguments[f]);for(var s in n)r.call(n,s)&&(u[s]=n[s]);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(n);for(var c=0;c<o.length;c++)i.call(n,o[c])&&(u[o[c]]=n[o[c]])}}return u}},{}],2:[function(t,n){!function(){"use strict";function t(t){return"function"==typeof t}function e(t){return"[object Array]"===Object.prototype.toString.call(t)}function r(t){return t instanceof Date?t.getTime():t instanceof Array?t.map(r):t}function i(t){return function(n,r){if(!e(r)||!r.length)return t(n,r);for(var i=0,o=r.length;o>i;i++)if(t(n,r[i]))return!0;return!1}}function o(t){return function(n,r){if(!e(r)||!r.length)return t(n,r);for(var i=0,o=r.length;o>i;i++)if(!t(n,r[i]))return!1;return!0}}function u(t,n){return t.v(t.a,n)}function f(t,n){for(var e=0;e<t.length;e++)if(u(n,t[e]))return e;return-1}function s(t,n){return{a:t,v:n}}function c(t,n){var e=[];return a(n,t.k,0,e),1===e.length?u(t.nv,e[0]):!!~f(e,t.nv)}function a(t,n,r,i){if(r===n.length||void 0==t)return void i.push(t);if(e(t))for(var o=0,u=t.length;u>o;o++)a(t[o],n,r,i);else a(t[n[r]],n,r+1,i)}function l(t,n){return{a:{k:t,nv:n},v:c}}function h(t){t=r(t),(!t||"Object"!==t.constructor.toString()&&"functionObject(){[nativecode]}"!==t.constructor.toString().replace(/\n/g,"").replace(/ /g,""))&&(t={$eq:t});var n=[];for(var e in t){var i=t[e];if("$options"!==e)if(g[e])d[e]&&(i=d[e](i,t)),n.push(s(r(i),g[e]));else{if(36===e.charCodeAt(0))throw new Error("Unknown operation "+e);n.push(l(e.split("."),h(i)))}}return 1===n.length?n[0]:s(n,g.$and)}function p(t,n){var e=h(t);return n&&(e={a:e,v:function(t,e){return u(t,n(e))}}),e}function y(n,e,r){function i(t){return u(o,t)}t(e)&&(r=e,e=void 0);var o=p(n,r);return e?Array.isArray(e)?e.filter(i):v(e,i):i}function v(t,n){var e={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];n(i)&&(e[r]=i)}return e}var g={$eq:i(function(t,n){return t(n)}),$ne:o(function(t,n){return!t(n)}),$or:function(t,n){for(var e=0,r=t.length;r>e;e++)if(u(t[e],n))return!0;return!1},$gt:i(function(t,n){return typeof r(n)==typeof t&&r(n)>t}),$gte:i(function(t,n){return typeof r(n)==typeof t&&r(n)>=t}),$lt:i(function(t,n){return typeof r(n)==typeof t&&r(n)<t}),$lte:i(function(t,n){return typeof r(n)==typeof t&&r(n)<=t}),$mod:i(function(t,n){return n%t[0]==t[1]}),$in:function(t,n){if(!(n instanceof Array))return!!~t.indexOf(r(n));for(var e=n.length;e--;)if(~t.indexOf(r(n[e])))return!0;return!1},$nin:function(t,n){return!g.$in(t,n)},$not:function(t,n){return!u(t,n)},$type:function(t,n){return void 0!=n?n instanceof t||n.constructor==t:!1},$all:function(t,n){n||(n=[]);for(var e=t.length;e--;)if(!~r(n).indexOf(t[e]))return!1;return!0},$size:function(t,n){return n?t===n.length:!1},$nor:function(t,n){for(var e=0,r=t.length;r>e;e++)if(u(t[e],n))return!1;return!0},$and:function(t,n){for(var e=0,r=t.length;r>e;e++)if(!u(t[e],n))return!1;return!0},$regex:i(function(t,n){return"string"==typeof n&&t.test(n)}),$where:function(t,n){return t.call(n,n)},$elemMatch:function(t,n){return e(n)?!!~f(n,t):u(t,n)},$exists:function(t,n){return void 0!=n===t}},d={$eq:function(t){return t instanceof RegExp?function(n){return"string"==typeof n&&t.test(n)}:t instanceof Function?t:e(t)&&!t.length?function(t){return e(t)&&!t.length}:null===t?function(t){return null==t}:function(n){return t===r(n)}},$ne:function(t){return d.$eq(t)},$and:function(t){return t.map(h)},$or:function(t){return t.map(h)},$nor:function(t){return t.map(h)},$not:function(t){return h(t)},$regex:function(t,n){return new RegExp(t,n.$options)},$where:function(t){return"string"==typeof t?new Function("obj","return "+t):t},$elemMatch:function(t){return h(t)},$exists:function(t){return!!t}};y.use=function(n){if(t(n))return n(y);for(var e in n)36===e.charCodeAt(0)&&(g[e]=n[e])},y.indexOf=function(t,n,e){return f(n,p(t,e))},y.keyOf=function(t,n,e){var r=p(t,e);for(var i in n)if(n.hasOwnProperty(i)&&u(r,n[i]))return i},"undefined"!=typeof n&&"undefined"!=typeof n.exports&&(n.exports=y),"undefined"!=typeof window&&(window.sift=y)}()},{}],3:[function(t,n){"use strict";function e(t,n){var r=this;return this instanceof e?(this.value=t,u(this,"root",n&&n.root||this),u(this,"keypath",n&&n.keypath||[]),u(this,"extensions",n&&n.extensions||[]),void this.extensions.forEach(function(t){e.each(t,function(t,n){r[n]=t})})):new e(t,n)}function r(t,n,e){return t.hasOwnProperty(n)?t[n]:e}function i(t,n){return"string"==typeof t?t.split("."):n&&1===t.length?Array.isArray(t[0])?t[0].map(function(t){return""+t}):"number"==typeof t[0]?[""+t[0]]:(""+t[0]).split("."):(n&&(t=[].slice.call(t)),t.map(function(t){return""+t}))}var o=t("sift"),u=t("./utilities/define_property"),f=t("./utilities/collections");e.prototype={go:function(){var t=i(arguments,!0),n=this.get.apply(this,t);return this._get(n,t,!0)},at:function(t){var n=this.keys()[t];return this._get(this.value[n],[n])},filter:function(t){var n=o(t,this.value);return this._get(n,[])},find:function(t){var n=o.keyOf(t,this.value);if("undefined"!=typeof n)return this._get(this.value[n],[n])},first:function(){return this.at(0)},last:function(){return this.at(this.len()-1)},get:function(){for(var t=this.value,n=i(arguments,!0),e=0,r=n.length;r>e;e++)if(t=t[n[e]],!t)return;return t},len:function(){return this.value?Array.isArray(this.value)?this.value.length:this.keys().length:0},toArray:function(){if(Array.isArray(this.value))return this.value;var t=[];return e.each(this.value,function(n){return t.push(n)}),t},values:function(){return this.toArray()},keys:function(){return Object.keys(this.value)},set:function(t,n){if(t=i(t),this.root!==this){var r=this.root.set(this.keypath.concat(t),n);return r.go.apply(r,this.keypath)}var o=e.set(this.value,t,n);return this.spawn(o,{keypath:[],root:null})},del:function(t){if(t=i(t),this.root!==this){var n=this.root.del(this.keypath.concat(t));return n.go.apply(n,this.keypath)}var r=e.del(this.value,t);return this.spawn(r,{keypath:[],root:null})},extend:function(){},use:function(t){return this.spawn(this.value,{extensions:[t]})},toJSON:function(){return this.value},toString:function(){return"[scour ("+this.keys().join(", ")+")]"},forEach:function(t){var n=this;return e.each(this.value,function(e,r){t.call(e,n._get(e,[r]),r)}),this},each:function(t){return this.forEach(t)},map:f.map,_get:function(t,n){return"undefined"==typeof t||null===t?t:this.spawn(t,{keypath:this.keypath.concat(n)})},spawn:function(t,n){return new e(t||this.value,{root:r(n,"root",this.root),keypath:r(n,"keypath",this.keypath),extensions:n&&"undefined"==typeof n.extensions?this.extensions:this.extensions.concat(n.extensions)})}},e.set=t("./utilities/set"),e.del=t("./utilities/del"),e.each=t("./utilities/each"),n.exports=e},{"./utilities/collections":6,"./utilities/define_property":7,"./utilities/del":8,"./utilities/each":9,"./utilities/set":10,sift:2}],4:[function(t,n){"use strict";n.exports=function(n){var e=t("object-assign");return Array.isArray(n)?[].slice.call(n):e({},n)}},{"object-assign":1}],5:[function(t,n){"use strict";n.exports=function(t,n){if(Array.isArray(t))return t.slice(0,+n).concat(t.slice(+n+1));var e={};n=""+n;for(var r in t)t.hasOwnProperty(r)&&n!==r&&(e[r]=t[r]);return e}},{}],6:[function(t,n){"use strict";n.exports={map:function(t){var n=[];return this.forEach(function(){n.push(t.apply(this,arguments))}),n}}},{}],7:[function(t,n){"use strict";var e;e=Object.defineProperty?function(t,n,e){Object.defineProperty(t,n,{configurable:!0,enumerable:!1,writable:!0,value:e})}:function(t,n,e){t[n]=e},n.exports=e},{}],8:[function(t,n){"use strict";function e(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}var r=t("./clone"),i=t("./clone_without");n.exports=function(t,n){for(var o={},u={},f=0,s=n.length;s>f;f++)if(0===f)u[f]=t;else if(u[f]=u[f-1][n[f-1]],!u[f]||"object"!==e(u[f]))return t;for(var f=n.length-1;f>=0;f--)f===n.length-1?(o[f]=i(u[f],n[f]),delete o[f][n[f]]):(o[f]=r(u[f]),o[f][n[f]]=o[f+1]);return o[0]}},{"./clone":4,"./clone_without":5}],9:[function(t,n){"use strict";function e(t,n){if(t){var e,r,i=t.length;if("number"==typeof i)for(e=0;i>e;e++)n(t[e],e);else{r=0;for(e in t)t.hasOwnProperty(e)&&n(t[e],e,r++)}return t}}n.exports=e},{}],10:[function(t,n){"use strict";function e(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}var r=t("./clone");n.exports=function(t,n,i){for(var o={},u={},f=0,s=n.length;s>f;f++)0===f?u[f]=t:(u[f]=u[f-1][n[f-1]]||{},"object"!==e(u[f])&&(u[f]={}));for(var f=n.length;f>=0;f--)u[f]?(o[f]=r(u[f]),o[f][n[f]]=o[f+1]):o[f]=i;return o[0]}},{"./clone":4}]},{},[3])(3)});